"use strict";(self["webpackChunkhosp"]=self["webpackChunkhosp"]||[]).push([[839],{839:function(e,a,l){l.r(a),l.d(a,{default:function(){return p}});l(7658);var t=l(3396),o=l(4870),d=l(4901),n=l(7178),r=l(2655);const u={class:"dialog-footer"},i={name:"EditDialog"};var s=Object.assign(i,{props:{changeDepartmentDialogVisible:{type:Boolean,required:!0,default:!1},roomList:{type:Array,required:!0,default:()=>[]}},emits:["update:changeDepartmentDialogVisible","handleSubmit"],setup(e,{emit:a}){const l=e,i=(0,t.Fl)({get(){return l.changeDepartmentDialogVisible},set(e){a("update:changeDepartmentDialogVisible",e)}}),s=(0,o.iH)({id:[],departmentId:0}),m=(0,o.iH)([]),p=(0,o.qj)({departmentId:[{required:!0,message:"所属科室不能为空",trigger:"blur"}]}),c=(0,o.iH)(null),g=async e=>{let a=[];for(const o of l.roomList)a.push(o.id);s.value={id:a,departmentId:0},console.log("清空表单...");let t=await d.ZP.get("/api/bsns/departments");if(console.log(t.data),20010==t.data.code){let e=[];t.data.departmentList.forEach((a=>{a.name="+ "+a.name,e.push(a),a.children.forEach((a=>{a.name="••• "+a.name,e.push(a)}))})),m.value=e}else(0,n.z8)({message:t.data.msg,type:"error"})},f=e=>{r.T.confirm("确认在未保存的情况下关闭对话框？").then((()=>{e()})).catch((()=>{}))},h=()=>{i.value=!1},b=()=>{c.value.validate((async e=>{if(e){let e,l;console.log("提交修改..."),e="/api/bsns/rooms/updateDepartment/"+s.value.id.join(",")+"/"+s.value.departmentId,console.log("url=",e),l=await d.ZP.put(e,s.value),console.log("修改诊室科室 res.data= ",l.data),20020==l.data.code||20030==l.data.code?((0,n.z8)({message:l.data.msg,type:"success"}),a("handleSubmit"),h()):(0,n.z8)({message:l.data.msg,type:"error"})}}))};return(0,t.YP)(i,(e=>{1==e&&g()})),(e,a)=>{const l=(0,t.up)("el-option"),d=(0,t.up)("el-select"),n=(0,t.up)("el-form-item"),r=(0,t.up)("el-form"),v=(0,t.up)("el-button"),w=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(w,{modelValue:(0,o.SU)(i),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.dq)(i)?i.value=e:null),title:"批量修改科室","before-close":f,width:"600px",draggable:""},{footer:(0,t.w5)((()=>[(0,t._)("span",u,[(0,t.Wm)(v,{onClick:g},{default:(0,t.w5)((()=>[(0,t.Uk)("重置")])),_:1}),(0,t.Wm)(v,{onClick:h},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(v,{type:"primary",onClick:b},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(r,{ref_key:"editFormRef",ref:c,model:s.value,rules:p,inline:"","label-width":"80px","label-position":"right","status-icon":""},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"所属科室",prop:"departmentId",style:{width:"48%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:s.value.departmentId,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.departmentId=e),placeholder:"请选择所属科室"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{label:"顶级科室",value:0}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.value,(e=>((0,t.wg)(),(0,t.j4)(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}});const m=s;var p=m}}]);
//# sourceMappingURL=839.c3b7ab85.js.map