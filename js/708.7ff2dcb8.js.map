{"version":3,"file":"js/708.7ff2dcb8.js","mappings":"kPAwqBA,EAAe,CACbA,KAAM,c,wPA3jBFC,GAAoBC,EAAAA,EAAAA,IAAS,CAEjCC,MACE,OAAOC,EAAMH,iBACd,EACDI,IAAIC,GACFC,EAAK,2BAA4BD,EAClC,IAIGE,GAAWC,EAAAA,EAAAA,IAAI,CACnBC,IAAK,EACLC,SAAU,EACVC,KAAM,GACNZ,KAAM,GACNa,SAAU,EACVC,KAAM,GACNC,MAAO,GACPC,UAAW,GACXC,KAAM,GACNC,UAAU,EACVC,KAAM,KAIFC,GAAeX,EAAAA,EAAAA,IAAI,IAGnBY,EAAQ,CACZ,OACA,QACA,aACA,SACA,SACA,OACA,MACA,QACA,aACA,UACA,OACA,UACA,UACA,OACA,eACA,aACA,eACA,UACA,QACA,WACA,WACA,WACA,aACA,YACA,gBACA,iBACA,gBACA,OACA,OACA,SACA,OACA,eACA,cACA,UACA,OACA,mBACA,OACA,QACA,cACA,UACA,cACA,QACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,YACA,UACA,OACA,UACA,aACA,UACA,WACA,SACA,OACA,eACA,YACA,OACA,SACA,UACA,SACA,aACA,oBACA,gBACA,gBACA,oBACA,iBACA,qBACA,aACA,aACA,QACA,aACA,OACA,eACA,SACA,aACA,QACA,aACA,UACA,YACA,OACA,YACA,eACA,eACA,mBACA,YACA,UACA,aACA,YACA,gBACA,cACA,iBACA,gBACA,cACA,aACA,WACA,SACA,MACA,SACA,OACA,QACA,WACA,UACA,cACA,aACA,OACA,SACA,WACA,OACA,YACA,WACA,aACA,cACA,SACA,SACA,OACA,cACA,WACA,WACA,UACA,OACA,aACA,WACA,kBACA,QACA,iBACA,kBACA,YACA,eACA,eACA,gBACA,QACA,SACA,eACA,eACA,eACA,eACA,iBACA,YACA,cACA,UACA,WACA,aACA,UACA,SACA,SACA,cACA,OACA,aACA,OACA,MACA,aACA,cACA,YACA,UACA,UACA,OACA,SACA,UACA,iBACA,SACA,YACA,oBACA,gBACA,WACA,eACA,aACA,WACA,sBACA,iBACA,aACA,UACA,iBACA,SACA,QACA,cACA,cACA,QACA,iBACA,MACA,aACA,OACA,YACA,UACA,MACA,mBACA,aACA,YACA,QACA,OACA,UACA,WACA,SACA,UACA,OACA,SACA,YACA,YACA,UACA,WACA,WACA,UACA,iBACA,YACA,gBACA,OACA,WACA,QACA,QACA,QACA,SACA,SACA,eACA,SACA,SACA,UACA,WACA,aACA,MACA,QACA,eACA,MACA,WACA,QACA,WACA,eACA,WACA,aACA,QACA,YACA,UACA,QACA,QACA,cACA,SACA,OACA,SACA,cACA,cACA,YACA,aACA,aACA,WACA,OACA,QACA,OACA,UACA,MACA,eACA,mBACA,kBACA,QACA,UACA,UACA,cACA,SACA,aACA,YACA,QACA,gBACA,cACA,WACA,SACA,cACA,cACA,eACA,cACA,OACA,cACA,YACA,QACA,UACA,QACA,OACA,eACA,eACA,SACA,YACA,UACA,SACA,OACA,YACA,YACA,eACA,QACA,cACA,cACA,OACA,eACA,aAIIC,GAAeb,EAAAA,EAAAA,KAAI,GACnBc,GAAgBd,EAAAA,EAAAA,KAAI,GACpBe,GAAoBf,EAAAA,EAAAA,KAAI,GACxBgB,GAAehB,EAAAA,EAAAA,KAAI,GAGnBiB,EAAeC,MAAOC,EAAMC,EAAOC,KAIvC,IAAIC,EAyCJ,GAvCkB,QAAdH,EAAKI,MACHH,GAASA,EAAMI,OAAS,GAC1BH,EAAS,IAAII,MAAM,kBAEnBH,EAAM,+BAAiCvB,EAASqB,MAAMnB,GAAK,SAAWmB,EAEjD,SAAdD,EAAKI,MACVH,GAASA,EAAMI,OAAS,GAC1BH,EAAS,IAAII,MAAM,kBAEnBH,EAAM,+BAAiCvB,EAASqB,MAAMnB,GAAK,UAAYmB,EAElD,YAAdD,EAAKI,OACA,GAAVH,EACFC,EAAS,IAAII,MAAM,aAEnBJ,IAEqB,QAAdF,EAAKI,MACVH,GAASA,EAAMI,OAAS,GAC1BH,EAAS,IAAII,MAAM,gBAEnBJ,IAEqB,aAAdF,EAAKI,MACVH,GAASA,EAAMI,OAAS,IAC1BH,EAAS,IAAI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","sources":["webpack://hosp/./src/views/sys/menu/EditDialog.vue","webpack://hosp/./src/views/sys/menu/EditDialog.vue?e969"],"sourcesContent":["<template>\r\n  <el-dialog v-model=\"editDialogVisible\" :title=\"title\" :before-close=\"handleClose\" width=\"600px\" draggable>\r\n    <el-form\r\n        ref=\"editFormRef\"\r\n        :model=\"editForm\"\r\n        :rules=\"editFormRules\"\r\n        inline\r\n        label-width=\"80px\"\r\n        label-position=\"right\"\r\n        status-icon>\r\n      <el-form-item label=\"类型\" prop=\"type\" style=\"width: 100%;\">\r\n        <el-radio-group v-model=\"editForm.type\">\r\n          <el-radio label=\"F\">目录</el-radio>\r\n          <el-radio label=\"M\">菜单</el-radio>\r\n          <el-radio label=\"P\">权限</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"父节点\" prop=\"parentId\" style=\"width: 48%;\">\r\n        <el-select v-model=\"editForm.parentId\" placeholder=\"请选择上级菜单\">\r\n          <el-option label=\"顶级菜单\" :value=\"0\"/>\r\n          <el-option v-for=\"menu in menuListTree\" :key=\"menu.id\" :label=\"menu.name\" :value=\"menu.id\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"disabled\" style=\"width: 40%;\">\r\n        <el-switch\r\n            v-model=\"editForm.disabled\"\r\n            style=\"--el-switch-on-color: #13ce66; --el-switch-off-color: #ff4949\"\r\n            active-text=\"启用\"\r\n            inactive-text=\"禁用\"\r\n            :active-value=\"false\"\r\n            :inactive-value=\"true\"\r\n            width=\"50px\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"名称\" prop=\"name\" style=\"width: 48%;\">\r\n        <el-input v-model=\"editForm.name\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"图标\" prop=\"icon\" style=\"width: 40%;\">\r\n        <el-select\r\n            v-model=\"editForm.icon\"\r\n            filterable\r\n            allow-create\r\n            default-first-option\r\n            :reserve-keyword=\"false\"\r\n            :suffix-icon=\"editForm.icon\"\r\n            :disabled=\"iconDisabled\"\r\n        >\r\n          <el-option\r\n              v-for=\"item in icons\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\"\r\n          />\r\n        </el-select>\r\n        <!--        <el-icon :size=\"16\"><component v-if=\"editForm.icon!=''\" :is=\"editForm.icon\"/></el-icon>-->\r\n      </el-form-item>\r\n      <el-form-item label=\"组件路径\" prop=\"component\" style=\"width: 48%;\">\r\n        <el-input v-model=\"editForm.component\" :disabled=\"componentDisabled\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"路由路径\" prop=\"path\" style=\"width: 40%;\">\r\n        <el-input v-model=\"editForm.path\" :disabled=\"pathDisabled\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"权限代码\" prop=\"perms\" style=\"width: 48%;\">\r\n        <el-input v-model=\"editForm.perms\" :disabled=\"permsDisabled\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"相对顺序\" prop=\"sequence\" style=\"width: 40%;\">\r\n        <el-input-number v-model=\"editForm.sequence\" :min=\"1\" :max=\"10\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"备注\" prop=\"note\" style=\"width: 100%;\">\r\n        <el-input v-model=\"editForm.note\" type=\"textarea\" :rows=\"5\"/>\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"handleReset(id)\">重置</el-button>\r\n        <el-button @click=\"handleCancel\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\">确定</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineProps, defineEmits, computed, ref, watch, reactive} from 'vue';\r\nimport AxiosUtil from \"@/utils/AxiosUtil\";\r\nimport {ElMessageBox, ElMessage} from \"element-plus\";\r\n\r\n// 定义传入该子组件的参数\r\nconst props = defineProps({\r\n  editDialogVisible: {\r\n    type: Boolean,\r\n    required: true,\r\n    default: false\r\n  },\r\n  id: {\r\n    type: Number,\r\n    required: true,\r\n    default: -1\r\n  },\r\n  title: {\r\n    type: String,\r\n    required: true,\r\n    default: ''\r\n  }\r\n});\r\n\r\n// 定义组件（自定义）事件\r\nconst emit = defineEmits(['update:editDialogVisible', 'handleSubmit']);\r\n\r\n// 定义“编辑”对话框的显示状态\r\nconst editDialogVisible = computed({\r\n  // 只读！读取时从父组件获取，更新时更新父组件\r\n  get() {\r\n    return props.editDialogVisible;\r\n  },\r\n  set(newValue) {\r\n    emit('update:editDialogVisible', newValue);\r\n  }\r\n});\r\n\r\n// 定义表单数据\r\nconst editForm = ref({\r\n  id: -1,\r\n  parentId: 0,\r\n  type: '',\r\n  name: '',\r\n  sequence: 1,\r\n  icon: '',\r\n  perms: '',\r\n  component: '',\r\n  path: '',\r\n  disabled: false,\r\n  note: '',\r\n});\r\n\r\n// 定义上级菜单树\r\nconst menuListTree = ref([]);\r\n\r\n// 定义图标数据源\r\nconst icons = [\r\n  'Plus',\r\n  'Minus',\r\n  'CirclePlus',\r\n  'Search',\r\n  'Female',\r\n  'Male',\r\n  'Aim',\r\n  'House',\r\n  'FullScreen',\r\n  'Loading',\r\n  'Link',\r\n  'Service',\r\n  'Pointer',\r\n  'Star',\r\n  'Notification',\r\n  'Connection',\r\n  'ChatDotRound',\r\n  'Setting',\r\n  'Clock',\r\n  'Position',\r\n  'Discount',\r\n  'Odometer',\r\n  'ChatSquare',\r\n  'ChatRound',\r\n  'ChatLineRound',\r\n  'ChatLineSquare',\r\n  'ChatDotSquare',\r\n  'View',\r\n  'Hide',\r\n  'Unlock',\r\n  'Lock',\r\n  'RefreshRight',\r\n  'RefreshLeft',\r\n  'Refresh',\r\n  'Bell',\r\n  'MuteNotification',\r\n  'User',\r\n  'Check',\r\n  'CircleCheck',\r\n  'Warning',\r\n  'CircleClose',\r\n  'Close',\r\n  'PieChart',\r\n  'More',\r\n  'Compass',\r\n  'Filter',\r\n  'Switch',\r\n  'Select',\r\n  'SemiSelect',\r\n  'CloseBold',\r\n  'EditPen',\r\n  'Edit',\r\n  'Message',\r\n  'MessageBox',\r\n  'TurnOff',\r\n  'Finished',\r\n  'Delete',\r\n  'Crop',\r\n  'SwitchButton',\r\n  'Operation',\r\n  'Open',\r\n  'Remove',\r\n  'ZoomOut',\r\n  'ZoomIn',\r\n  'InfoFilled',\r\n  'CircleCheckFilled',\r\n  'SuccessFilled',\r\n  'WarningFilled',\r\n  'CircleCloseFilled',\r\n  'QuestionFilled',\r\n  'WarnTriangleFilled',\r\n  'UserFilled',\r\n  'MoreFilled',\r\n  'Tools',\r\n  'HomeFilled',\r\n  'Menu',\r\n  'UploadFilled',\r\n  'Avatar',\r\n  'HelpFilled',\r\n  'Share',\r\n  'StarFilled',\r\n  'Comment',\r\n  'Histogram',\r\n  'Grid',\r\n  'Promotion',\r\n  'DeleteFilled',\r\n  'RemoveFilled',\r\n  'CirclePlusFilled',\r\n  'ArrowLeft',\r\n  'ArrowUp',\r\n  'ArrowRight',\r\n  'ArrowDown',\r\n  'ArrowLeftBold',\r\n  'ArrowUpBold',\r\n  'ArrowRightBold',\r\n  'ArrowDownBold',\r\n  'DArrowRight',\r\n  'DArrowLeft',\r\n  'Download',\r\n  'Upload',\r\n  'Top',\r\n  'Bottom',\r\n  'Back',\r\n  'Right',\r\n  'TopRight',\r\n  'TopLeft',\r\n  'BottomRight',\r\n  'BottomLeft',\r\n  'Sort',\r\n  'SortUp',\r\n  'SortDown',\r\n  'Rank',\r\n  'CaretLeft',\r\n  'CaretTop',\r\n  'CaretRight',\r\n  'CaretBottom',\r\n  'DCaret',\r\n  'Expand',\r\n  'Fold',\r\n  'DocumentAdd',\r\n  'Document',\r\n  'Notebook',\r\n  'Tickets',\r\n  'Memo',\r\n  'Collection',\r\n  'Postcard',\r\n  'ScaleToOriginal',\r\n  'SetUp',\r\n  'DocumentDelete',\r\n  'DocumentChecked',\r\n  'DataBoard',\r\n  'DataAnalysis',\r\n  'CopyDocument',\r\n  'FolderChecked',\r\n  'Files',\r\n  'Folder',\r\n  'FolderDelete',\r\n  'FolderRemove',\r\n  'FolderOpened',\r\n  'DocumentCopy',\r\n  'DocumentRemove',\r\n  'FolderAdd',\r\n  'FirstAidKit',\r\n  'Reading',\r\n  'DataLine',\r\n  'Management',\r\n  'Checked',\r\n  'Ticket',\r\n  'Failed',\r\n  'TrendCharts',\r\n  'List',\r\n  'Microphone',\r\n  'Mute',\r\n  'Mic',\r\n  'VideoPause',\r\n  'VideoCamera',\r\n  'VideoPlay',\r\n  'Headset',\r\n  'Monitor',\r\n  'Film',\r\n  'Camera',\r\n  'Picture',\r\n  'PictureRounded',\r\n  'Iphone',\r\n  'Cellphone',\r\n  'VideoCameraFilled',\r\n  'PictureFilled',\r\n  'Platform',\r\n  'CameraFilled',\r\n  'BellFilled',\r\n  'Location',\r\n  'LocationInformation',\r\n  'DeleteLocation',\r\n  'Coordinate',\r\n  'Bicycle',\r\n  'OfficeBuilding',\r\n  'School',\r\n  'Guide',\r\n  'AddLocation',\r\n  'MapLocation',\r\n  'Place',\r\n  'LocationFilled',\r\n  'Van',\r\n  'Watermelon',\r\n  'Pear',\r\n  'NoSmoking',\r\n  'Smoking',\r\n  'Mug',\r\n  'GobletSquareFull',\r\n  'GobletFull',\r\n  'KnifeFork',\r\n  'Sugar',\r\n  'Bowl',\r\n  'MilkTea',\r\n  'Lollipop',\r\n  'Coffee',\r\n  'Chicken',\r\n  'Dish',\r\n  'IceTea',\r\n  'ColdDrink',\r\n  'CoffeeCup',\r\n  'DishDot',\r\n  'IceDrink',\r\n  'IceCream',\r\n  'Dessert',\r\n  'IceCreamSquare',\r\n  'ForkSpoon',\r\n  'IceCreamRound',\r\n  'Food',\r\n  'HotWater',\r\n  'Grape',\r\n  'Fries',\r\n  'Apple',\r\n  'Burger',\r\n  'Goblet',\r\n  'GobletSquare',\r\n  'Orange',\r\n  'Cherry',\r\n  'Printer',\r\n  'Calendar',\r\n  'CreditCard',\r\n  'Box',\r\n  'Money',\r\n  'Refrigerator',\r\n  'Cpu',\r\n  'Football',\r\n  'Brush',\r\n  'Suitcase',\r\n  'SuitcaseLine',\r\n  'Umbrella',\r\n  'AlarmClock',\r\n  'Medal',\r\n  'GoldMedal',\r\n  'Present',\r\n  'Mouse',\r\n  'Watch',\r\n  'QuartzWatch',\r\n  'Magnet',\r\n  'Help',\r\n  'Soccer',\r\n  'ToiletPaper',\r\n  'ReadingLamp',\r\n  'Paperclip',\r\n  'MagicStick',\r\n  'Basketball',\r\n  'Baseball',\r\n  'Coin',\r\n  'Goods',\r\n  'Sell',\r\n  'SoldOut',\r\n  'Key',\r\n  'ShoppingCart',\r\n  'ShoppingCartFull',\r\n  'ShoppingTrolley',\r\n  'Phone',\r\n  'Scissor',\r\n  'Handbag',\r\n  'ShoppingBag',\r\n  'Trophy',\r\n  'TrophyBase',\r\n  'Stopwatch',\r\n  'Timer',\r\n  'CollectionTag',\r\n  'TakeawayBox',\r\n  'PriceTag',\r\n  'Wallet',\r\n  'Opportunity',\r\n  'PhoneFilled',\r\n  'WalletFilled',\r\n  'GoodsFilled',\r\n  'Flag',\r\n  'BrushFilled',\r\n  'Briefcase',\r\n  'Stamp',\r\n  'Sunrise',\r\n  'Sunny',\r\n  'Ship',\r\n  'MostlyCloudy',\r\n  'PartlyCloudy',\r\n  'Sunset',\r\n  'Drizzling',\r\n  'Pouring',\r\n  'Cloudy',\r\n  'Moon',\r\n  'MoonNight',\r\n  'Lightning',\r\n  'ChromeFilled',\r\n  'Eleme',\r\n  'ElemeFilled',\r\n  'ElementPlus',\r\n  'Shop',\r\n  'SwitchFilled',\r\n  'WindPower',\r\n];\r\n\r\n// 定义部分元素是否禁用\r\nconst iconDisabled = ref(false);\r\nconst permsDisabled = ref(false);\r\nconst componentDisabled = ref(false);\r\nconst pathDisabled = ref(false);\r\n\r\n\r\nconst validateMenu = async (rule, value, callback) => {\r\n  // console.log(rule.field)\r\n  // console.log(value)\r\n\r\n  let url;\r\n  // 基础格式验证通过后，才给 url 赋值。\r\n  if (rule.field == 'name') {\r\n    if (value && value.length > 16) {\r\n      callback(new Error('菜单名称长度不可超过16位'));\r\n    } else {\r\n      url = '/api/sys/menus/checkMenu?id=' + editForm.value.id + '&name=' + value;\r\n    }\r\n  } else if (rule.field == 'perms') {\r\n    if (value && value.length > 32) {\r\n      callback(new Error('权限代码长度不可超过32位'));\r\n    } else {\r\n      url = '/api/sys/menus/checkMenu?id=' + editForm.value.id + '&perms=' + value;\r\n    }\r\n  } else if (rule.field == 'parentId') {\r\n    if (value == -1) {\r\n      callback(new Error('上级菜单不能为空'));\r\n    } else {\r\n      callback();\r\n    }\r\n  } else if (rule.field == 'icon') {\r\n    if (value && value.length > 32) {\r\n      callback(new Error('图标长度不可超过32位'));\r\n    } else {\r\n      callback();\r\n    }\r\n  } else if (rule.field == 'component') {\r\n    if (value && value.length > 128) {\r\n      callback(new Error('组件路径长度不可超过128位'));\r\n    } else {\r\n      callback();\r\n    }\r\n  } else if (rule.field == 'path') {\r\n    if (value && value.length > 128) {\r\n      callback(new Error('路由路径长度不可超过128位'));\r\n    } else {\r\n      callback();\r\n    }\r\n  }\r\n  // url 有值，才向后台发送验证请求。\r\n  // console.log(url);\r\n  if (url) {\r\n    // console.log('向后台发送请求');\r\n    let res = await AxiosUtil.post(url);\r\n    // console.log(res.data);\r\n    if (res.data.code == 1) {\r\n      callback(new Error(res.data.msg));\r\n    } else {\r\n      callback();\r\n    }\r\n  }\r\n}\r\n\r\n// 定义表单验证规则\r\nconst editFormRules = reactive({\r\n  name: [\r\n    {required: true, message: '菜单名称不能为空', trigger: 'blur'},\r\n    {validator: validateMenu, trigger: 'change'},\r\n    {validator: validateMenu, trigger: 'blur'},\r\n  ],\r\n  parentId: [\r\n    {required: true, message: '上级菜单不能为空', trigger: 'blur'},\r\n  ],\r\n  type: [\r\n    {required: true, message: '类型不能为空', trigger: 'blur'},\r\n  ],\r\n  sequence: [\r\n    {required: true, message: '序号不能为空', trigger: 'blur'},\r\n  ],\r\n  icon: [\r\n    {validator: validateMenu, trigger: 'blur'},\r\n  ],\r\n  perms: [\r\n    {validator: validateMenu, trigger: 'change'},\r\n    {validator: validateMenu, trigger: 'blur'},\r\n  ],\r\n  component: [\r\n    {required: false, max: 128, message: '组件路径长度不可超过128个字符', trigger: 'blur'},\r\n  ],\r\n  path: [\r\n    {required: false, max: 128, message: '路由路径长度不可超过128个字符', trigger: 'blur'},\r\n  ],\r\n  disabled: [\r\n    {required: true, message: '状态不能为空', trigger: 'blur'},\r\n  ],\r\n  note: [\r\n    {required: false, max: 192, message: '备注信息不可超过192个字符', trigger: 'blur'},\r\n  ],\r\n})\r\n\r\n// 定义表单引用\r\nconst editFormRef = ref(null);\r\n\r\n// 表单重置事件\r\nconst handleReset = async (id) => {\r\n  if (id == -1) {\r\n    editForm.value = {\r\n      id: -1,\r\n      parentId: 0,\r\n      type: '',\r\n      name: '',\r\n      sequence: 1,\r\n      icon: '',\r\n      perms: '',\r\n      component: '',\r\n      path: '',\r\n      disabled: false,\r\n      note: '',\r\n    };\r\n    console.log('清空表单...');\r\n  } else {\r\n    let res = await AxiosUtil.get('/api/sys/menus/' + id);\r\n    console.log(res.data);\r\n    if (res.data.code == 20010) {\r\n      let menu = res.data.menu;\r\n      // 更新表格数据\r\n      editForm.value = menu;\r\n    } else {\r\n      ElMessage({\r\n        message: res.data.msg,\r\n        type: 'error',\r\n      });\r\n    }\r\n    console.log('从后台填充...');\r\n  }\r\n  // 无论是新增还是编辑，都需要向后台请求父节点列表\r\n  let res = await AxiosUtil.get('/api/sys/menus');\r\n  console.log(res.data);\r\n  if (res.data.code == 20010) {\r\n    let menus = [];\r\n    res.data.menuListTree.forEach(item => {\r\n      if (item.type == \"F\" || item.type == \"M\") {\r\n        item.name = \"+ \" + item.name;\r\n        menus.push(item);\r\n        item.children.forEach(child => {\r\n          if (child.type == \"M\") {\r\n            child.name = \"••• \" + child.name;\r\n            menus.push(child);\r\n          }\r\n        })\r\n      }\r\n    });\r\n    // 更新上级菜单列表\r\n    menuListTree.value = menus;\r\n  } else {\r\n    ElMessage({\r\n      message: res.data.msg,\r\n      type: 'error',\r\n    });\r\n  }\r\n}\r\n\r\n// 定义关闭对话框前的确认操作\r\nconst handleClose = (done) => {\r\n  ElMessageBox.confirm('确认在未保存的情况下关闭对话框？')\r\n      .then(() => {\r\n        done()\r\n      })\r\n      .catch(() => {\r\n        // catch error\r\n      })\r\n}\r\n\r\n// 定义对话框关闭事件\r\nconst handleCancel = () => {\r\n  editDialogVisible.value = false;\r\n}\r\n\r\n// 定义确认按钮事件\r\nconst handleConfirm = () => {\r\n  // 表单验证\r\n  editFormRef.value.validate(async valid => {\r\n    if (valid) {\r\n      // 表单验证通过\r\n      let url, res;\r\n      if (editForm.value.id == -1) {\r\n        console.log('提交新增...');\r\n        url = '/api/sys/menus';\r\n        res = await AxiosUtil.post(url, editForm.value);\r\n        console.log(\"新增菜单 res.data= \", res.data);\r\n      } else {\r\n        console.log('提交修改...');\r\n        url = '/api/sys/menus';\r\n        res = await AxiosUtil.put(url, editForm.value);\r\n        console.log(\"修改菜单 res.data= \", res.data);\r\n      }\r\n      if (res.data.code == 20020 || res.data.code == 20030) {\r\n        ElMessage({\r\n          message: res.data.msg,\r\n          type: 'success',\r\n        });\r\n        emit('handleSubmit'); // 触发自定义事件，使父组件刷新数据\r\n        handleCancel(); // 关闭对话框\r\n      } else {\r\n        ElMessage({\r\n          message: res.data.msg,\r\n          type: 'error',\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n// 当对话框重新显示时重置表单\r\nwatch(editDialogVisible, (newValue) => {\r\n  if (newValue == true) {\r\n    handleReset(props.id);\r\n  }\r\n})\r\n\r\n// 当菜单类型变化时，禁用部分元素\r\nwatch(editForm, (newValue) => {\r\n  if (newValue.type == 'F') {\r\n    iconDisabled.value = false;\r\n    permsDisabled.value = true;\r\n    componentDisabled.value = true;\r\n    pathDisabled.value = false;\r\n  } else if (newValue.type == 'M') {\r\n    iconDisabled.value = false;\r\n    permsDisabled.value = true;\r\n    componentDisabled.value = false;\r\n    pathDisabled.value = false;\r\n  } else if (newValue.type == 'P') {\r\n    iconDisabled.value = true;\r\n    permsDisabled.value = false;\r\n    componentDisabled.value = true;\r\n    pathDisabled.value = true;\r\n  }\r\n}, {deep: true})\r\n\r\n</script>\r\n\r\n\r\n<script>\r\nexport default {\r\n  name: \"EditDialog\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./EditDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditDialog.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["name","editDialogVisible","computed","get","props","set","newValue","emit","editForm","ref","id","parentId","type","sequence","icon","perms","component","path","disabled","note","menuListTree","icons","iconDisabled","permsDisabled","componentDisabled","pathDisabled","validateMenu","async","rule","value","callback","url","field","length","Error","res","AxiosUtil","data","code","msg","editFormRules","reactive","required","message","trigger","validator","max","editFormRef","handleReset","console","log","menu","ElMessage","menus","forEach","item","push","children","child","handleClose","done","ElMessageBox","then","catch","handleCancel","handleConfirm","validate","valid","watch","deep","__exports__"],"sourceRoot":""}